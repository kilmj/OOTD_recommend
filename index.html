<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OOTD & ì˜¤ëŠ˜ì˜ ìŒë£Œ ì¶”ì²œ</title>
    <link type="text/css" rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>OOTD & ì˜¤ëŠ˜ì˜ ìŒë£Œ ì¶”ì²œ</h1>
    </header>
    <main>
        <form id="recommend-form">
            <label for="ì§€ì—­ëª…ëª…">ğŸ“ ì§€ì—­ ì…ë ¥:</label>
            <input type="text" id="region" name="region" placeholder="ì˜ˆ: ì„œìš¸, ë¶€ì‚°" required/>

            <label for="allergy">ğŸš« ì•Œë ˆë¥´ê¸° ì¢…ë¥˜ ì…ë ¥:</label>
            <input type="text" id="allergy" name="allergy" placeholder="ì˜ˆ: ìš°ìœ , ê²¬ê³¼ë¥˜" required/>

            <button type="submit">OOTD & ì˜¤ëŠ˜ì˜ ìŒë£Œ ì¶”ì²œë°›ê¸°</button>
        </form>

        <!-- <form id="recommend-form">
            <label for="ì§€ì—­ëª…">ì§€ì—­ëª…</label>
            <input type="text" id="region" name="region" required/>

            <label for="ì•Œë ˆë¥´ê¸° ì¢…ë¥˜">ì•Œë ˆë¥´ê¸° ì¢…ë¥˜</label>
            <input type="text" id="allergy" name="allergy" required/>

            <button type="submit">ë‚ ì”¨ ê¸°ë°˜ ì¶”ì²œ ì˜·ì°¨ë¦¼ & ì˜¤ëŠ˜ì˜ ìŒë£Œë£Œ í™•ì¸í•˜ê¸°</button>
        </form> -->

        <!-- <section id="ai-response">
            <h2>ğŸ’¡ AI ì¶”ì²œ ê²°ê³¼</h2>
            <p id="response-text">ì—¬ê¸°ì— AIì˜ ì¶”ì²œì´ í‘œì‹œë©ë‹ˆë‹¤.</p>
        </section> -->   
    </main>

    <div id="result"></div>

    <script>
        const form = document.getElementById("recommend-form");
        const resultDiv = document.getElementById("result");

        form.addEventListener("submit", async (e) => {
        e.preventDefault();

        const region = document.getElementById("region").value;
        const allergy = document.getElementById("allergy").value;
        
        
        resultDiv.textContent = "ì˜·ì°¨ë¦¼ê³¼ ìŒë£Œ ì¶”ì²œì„ ìƒì„±ì¤‘ì…ë‹ˆë‹¤...";

        try {
            const response = await fetch("https://internet-basic-work2-20231352.vercel.app/api/duksungAI", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({ region,allergy }),
            });

            const data = await response.json();

            if (response.ok) {
            resultDiv.textContent = data.answer;
            } else {
            resultDiv.textContent = `ì˜¤ë¥˜: ${data.error}`;
            }
        } catch (err) {
            resultDiv.textContent = "ì„œë²„ì™€ í†µì‹  ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";
            console.error(err);
        }
        });
    </script>
</body>
</html>